<div
  class='max-w-7xl mx-auto px-4 py-10 pt-28'
  x-data="{ videoSrc: '', videoTitle: '' }"
>

  <div class='mb-8'>
    <a
      href='/kelass/{{pertemuan.minggu.kelas.id}}'
      class='inline-flex items-center gap-3 px-6 py-3 rounded-xl border border-slate-300 shadow-lg hover:shadow-xl text-slate-700 hover:bg-slate-50 hover:border-slate-400 transition-all duration-300 font-semibold text-base transform hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2'
    >
      <svg
        class='w-5 h-5'
        fill='none'
        stroke='currentColor'
        viewBox='0 0 24 24'
      >
        <path
          stroke-linecap='round'
          stroke-linejoin='round'
          stroke-width='2'
          d='M15 19l-7-7 7-7'
        ></path>
      </svg>
      Back to Class
    </a>
  </div>

  <div class='grid grid-cols-1 lg:grid-cols-3 gap-10'>

    <div class='col-span-2'>
      <div
        class='bg-gradient-to-br from-slate-50 to-white border border-slate-200 rounded-2xl shadow-lg overflow-hidden'
        x-show='videoSrc'
      >
        <template
          x-if="videoSrc.includes('youtube.com') || videoSrc.includes('youtu.be')"
        >
          <iframe
            x-bind:src="videoSrc.includes('youtube.com/watch?v=') 
              ? videoSrc.replace('watch?v=', 'embed/') 
              : videoSrc.includes('youtu.be/') 
                ? videoSrc.replace('youtu.be/', 'youtube.com/embed/') 
                : videoSrc"
            class='w-full h-[450px]'
            frameborder='0'
            allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture'
            allowfullscreen
          ></iframe>
        </template>
        <template
          x-if="!videoSrc.includes('youtube.com') && !videoSrc.includes('youtu.be')"
        >
          <video
            controls
            class='w-full h-[450px] bg-gradient-to-br from-slate-100 to-slate-50'
            x-bind:src='videoSrc'
          ></video>
        </template>
      </div>

      <div class='flex justify-between items-center mt-6'>
        <h1
          class='text-3xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent'
          x-text="videoTitle || 'Select a video to start learning'"
        ></h1>
      </div>
    </div>

    <div
      class='bg-gradient-to-br from-white to-slate-50 border border-slate-200 rounded-2xl shadow-lg overflow-hidden'
    >
      <div class='bg-gradient-to-r from-slate-900 to-slate-800 px-6 py-4'>
        <h2 class='text-xl font-semibold text-white flex items-center'>
          <svg
            xmlns='http://www.w3.org/2000/svg'
            class='h-6 w-6 mr-2'
            fill='none'
            viewBox='0 0 24 24'
            stroke='currentColor'
          >
            <path
              stroke-linecap='round'
              stroke-linejoin='round'
              stroke-width='2'
              d='M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z'
            />
          </svg>
          Video Materials
        </h2>
      </div>

      <div class='p-6'>
        {{#if materi.length}}
          <div class='space-y-3'>
            {{#each materi}}
              <button
                class='w-full text-left px-4 py-3 rounded-xl border border-slate-200 bg-white hover:bg-gradient-to-r hover:from-slate-50 hover:to-white hover:border-slate-300 hover:shadow-md transition-all duration-200 group'
                @click="videoSrc = '{{file}}'; videoTitle = '{{judul}}'"
              >
                <div class='flex items-center'>
                  <div
                    class='w-2 h-2 bg-slate-400 rounded-full mr-3 group-hover:bg-slate-600 transition-colors duration-200'
                  ></div>
                  <span
                    class='font-medium text-slate-800 group-hover:text-slate-900'
                  >{{judul}}</span>
                </div>
              </button>
            {{/each}}
          </div>
        {{else}}
          <div class='text-center py-8'>
            <svg
              xmlns='http://www.w3.org/2000/svg'
              class='h-12 w-12 text-slate-400 mx-auto mb-3'
              fill='none'
              viewBox='0 0 24 24'
              stroke='currentColor'
            >
              <path
                stroke-linecap='round'
                stroke-linejoin='round'
                stroke-width='2'
                d='M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z'
              />
            </svg>
            <p class='text-slate-500 text-sm font-medium'>No video materials
              available</p>
            <p class='text-slate-400 text-xs mt-1'>Check back later for new
              content</p>
          </div>
        {{/if}}
      </div>
    </div>
  </div>
</div>
<div class="pt-28 py-20">
  <div class="max-w-4xl mx-auto px-6 py-10 bg-white rounded-xl shadow-lg">
    <h2 class="text-2xl font-semibold mb-6 text-gray-900">Edit Alumni</h2>

    <form action="/alumni/{{alumni.id}}?_method=PATCH" method="post" 
          class="grid grid-cols-1 md:grid-cols-2 gap-6" enctype="multipart/form-data">

      <!-- Profile Photo -->
      <div x-data="{ previewUrl: null }" class="space-y-3 col-span-1 md:col-span-2">
        <label for="profile" class="block text-sm font-semibold text-gray-700 mb-1">
          Profile Photo
        </label>

        <!-- File input -->
        <input 
          type="file" 
          id="profile" 
          name="profile" 
          accept="image/*" 
          x-ref="fileInput"
          class="w-full border bg-white border-gray-300 rounded-lg px-4 py-2 
                 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700"
          @change="previewUrl = $event.target.files[0] ? URL.createObjectURL($event.target.files[0]) : null"
        >

        <!-- Preview new photo -->
        <template x-if="previewUrl">
          <div class="relative w-32 h-32 mt-2">
            <img 
              :src="previewUrl" 
              alt="Preview Photo" 
              class="w-32 h-32 object-cover rounded-lg border border-gray-300"
            >
            <button 
              type="button" 
              class="absolute -top-2 -right-2 bg-red-500 text-white w-6 h-6 rounded-full 
                     flex items-center justify-center shadow hover:bg-red-600"
              @click="previewUrl = null; $refs.fileInput.value = null;">
              &times;
            </button>
          </div>
        </template>

        <!-- Current photo -->
        <template x-if="!previewUrl">
          <div class="relative w-32 h-32 mt-2">
            <img 
              src="{{alumni.profile}}" 
              alt="Current Profile" 
              class="w-32 h-32 object-cover rounded-lg border border-gray-300"
            >
          </div>
        </template>
      </div>

      <!-- Name -->
      <div>
        <label for="nama" class="block text-sm font-semibold text-gray-700 mb-1">Name</label>
        <input type="text" id="nama" name="nama" 
               value="{{alumni.nama}}"
               class="w-full border bg-white border-gray-300 rounded-lg px-4 py-2 
                      focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
      </div>

      <!-- Alumni -->
      <div>
        <label for="alumni" class="block text-sm font-semibold text-gray-700 mb-1">Alumni</label>
        <input type="text" id="alumni" name="alumni" 
               value="{{alumni.alumni}}"
               class="w-full border bg-white border-gray-300 rounded-lg px-4 py-2 
                      focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
      </div>

      <!-- Current Position -->
      <div>
        <label for="posisi_sekarang" class="block text-sm font-semibold text-gray-700 mb-1">Current Position</label>
        <input type="text" id="posisi_sekarang" name="posisi_sekarang" 
               value="{{alumni.posisi_sekarang}}"
               class="w-full border bg-white border-gray-300 rounded-lg px-4 py-2 
                      focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
      </div>

      <!-- Class (relation) -->
      <div>
        <label for="kelasId" class="block text-sm font-semibold text-gray-700 mb-1">Class</label>
        <select id="kelasId" name="kelasId" 
          class="w-full border bg-white border-gray-300 rounded-lg px-4 py-2 
                 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
          <option value="" disabled>-- Select Class --</option>
          {{#each kelas}}
          <option value="{{id}}" {{#if (roles ../alumni.kelasId id)}}selected{{/if}}>
            {{nama_kelas}}
          </option>
          {{/each}}
        </select>
      </div>

      <!-- Message -->
      <div class="md:col-span-2">
        <label for="pesan" class="block text-sm font-semibold text-gray-700 mb-1">Message</label>
        <textarea id="pesan" name="pesan" rows="3" 
          class="w-full border bg-white border-gray-300 rounded-lg px-4 py-2 
                 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">{{alumni.pesan}}</textarea>
      </div>

      <!-- Action buttons -->
      <div class="flex gap-3 md:col-span-2">
        <button type="submit" 
          class="bg-gray-900 text-white px-6 py-2 rounded-lg shadow hover:bg-gray-600 transition">
          Update
        </button>
        <a href="/alumni"
          class="px-6 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition">
          Cancel
        </a>
      </div>
    </form>
  </div>
</div>

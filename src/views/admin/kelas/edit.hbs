<div class="pt-28 py-20">
  <div class="max-w-2xl mx-auto px-6 py-10 bg-white rounded-xl shadow-lg"
       x-data="{ 
         previewUrl: null, 
         oldPhoto: '/uploads/images/profile/{{kelas.gambar}}' 
       }">
    <h2 class="text-2xl font-semibold mb-6 text-gray-900">Edit Class</h2>

    <form method="POST" action="/kelass/{{kelas.id}}?_method=PATCH" class="space-y-6" enctype="multipart/form-data">

      <!-- Cover Class -->
      <div class="space-y-3">
        <label for="gambar" class="block text-sm font-medium text-gray-700 mb-1">
          Cover Class
        </label>
        <input 
          type="file" 
          id="gambar" 
          name="gambar" 
          accept="image/*" 
          x-ref="fileInput"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700"
          @change="previewUrl = $event.target.files[0] ? URL.createObjectURL($event.target.files[0]) : null"
        >

        <!-- Hidden untuk simpan gambar lama -->
        <input type="hidden" name="old_gambar" value="{{kelas.gambar}}">

        <div class="relative w-32 h-32 mt-2">
          <img 
            :src="previewUrl ? previewUrl : oldPhoto" 
            alt="Preview Photos" 
            class="w-32 h-32 object-cover rounded-lg border border-gray-300"
          >

          <template x-if="previewUrl">
            <button 
              type="button" 
              class="absolute -top-2 -right-2 bg-red-500 text-white w-6 h-6 rounded-full flex items-center justify-center shadow hover:bg-red-600"
              @click="previewUrl = null; $refs.fileInput.value = null;">
              &times;
            </button>
          </template>
        </div>
      </div>

      <!-- Category -->
      <div>
        <label for="kategoriId" class="block text-sm font-medium text-gray-700 mb-1">Category</label>
        <select name="kategoriId" id="kategoriId" 
          class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
          <option value="" disabled>-- Select Category --</option>
          {{#each kategori}}
            <option value="{{id}}" {{#if (roles id ../kelas.kategori.id)}}selected{{/if}}>
              {{nama_kategori}}
            </option>
          {{/each}}
        </select>
      </div>

      <!-- Nama Kelas -->
      <div>
        <label for="nama_kelas" class="block text-sm font-medium text-gray-700 mb-1">Name Class</label>
        <input type="text" id="nama_kelas" name="nama_kelas" value="{{kelas.nama_kelas}}" required
          class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
      </div>

      <!-- Teknologi -->
      <div>
        <label for="teknologi" class="block text-sm font-medium text-gray-700 mb-1">Tech</label>
        <input type="text" id="teknologi" name="teknologi" value="{{kelas.teknologi}}" required
          class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
      </div>

      <!-- Informasi -->
      <div>
        <label for="informasi_kelas" class="block text-sm font-medium text-gray-700 mb-1">Information</label>
        <textarea id="informasi_kelas" name="informasi_kelas" rows="3"
          class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">{{kelas.informasi_kelas}}</textarea>
      </div>

      <!-- Deskripsi -->
      <div>
        <label for="deskripsi" class="block text-sm font-medium text-gray-700 mb-1">Deskripsi</label>
        <textarea id="deskripsi" name="deskripsi" rows="3"
          class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">{{kelas.deskripsi}}</textarea>
      </div>

      <!-- Target Pembelajaran -->
      <div>
        <label for="target_pembelajaran" class="block text-sm font-medium text-gray-700 mb-1">Learning Target</label>
        <textarea id="target_pembelajaran" name="target_pembelajaran" rows="3"
          class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">{{kelas.target_pembelajaran}}</textarea>
      </div>

      <!-- Harga -->
      <div>
        <label for="harga" class="block text-sm font-medium text-gray-700 mb-1">Price</label>
        <input type="number" id="harga" name="harga" value="{{kelas.harga}}" required
          class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
      </div>

      <!-- Tombol -->
      <div class="flex space-x-4">
        <button type="submit"
          class="bg-gray-900 text-white px-6 py-2 rounded-lg shadow hover:bg-gray-600 transition">
          Update
        </button>
        <a href="/kelass"
          class="px-6 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition">
          Cancel
        </a>
      </div>
    </form>
  </div>
</div>

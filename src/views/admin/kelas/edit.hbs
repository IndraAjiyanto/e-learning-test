
    <div class="pt-28 py-20">
        <div class="max-w-6xl mx-auto px-6 py-10 bg-white rounded-xl shadow-lg">
            <h2 class="text-3xl font-bold mb-8 text-gray-900 text-center">Edit Class</h2>

            <form method="POST" action="/kelass/{{kelas.id}}?_method=PATCH" class="grid grid-cols-1 lg:grid-cols-2 gap-8" enctype="multipart/form-data">
                
                <!-- LEFT COLUMN -->
                <div class="space-y-6">
                    <!-- Cover -->
                    <div x-data="{ previewUrl: null, oldPhoto: '{{kelas.gambar}}' }" class="space-y-3">
                        <label for="gambar" class="block text-sm font-semibold text-gray-700 mb-1">Cover Class</label>
                        <input 
                            type="file" 
                            id="gambar" 
                            name="gambar" 
                            accept="image/*" 
                            x-ref="fileInput"
                            class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700"
                            @change="previewUrl = $event.target.files[0] ? URL.createObjectURL($event.target.files[0]) : null"
                        >
                        <input type="hidden" name="old_gambar" value="{{kelas.gambar}}">

                        <div class="relative w-32 h-32 mt-2">
                            <img 
                                :src="previewUrl ? previewUrl : oldPhoto" 
                                alt="Preview Photos" 
                                class="w-32 h-32 object-cover rounded-lg border border-gray-300"
                            >
                            <template x-if="previewUrl">
                                <button 
                                    type="button" 
                                    class="absolute -top-2 -right-2 bg-red-500 text-white w-6 h-6 rounded-full flex items-center justify-center shadow hover:bg-red-600"
                                    @click="previewUrl = null; $refs.fileInput.value = null;">
                                    &times;
                                </button>
                            </template>
                        </div>
                    </div>

                    <!-- Method -->
                    <div>
                        <span class="block text-sm font-semibold text-gray-700 mb-2">Metode</span>
                        <div class="grid grid-cols-2 gap-4">
                            <label class="cursor-pointer">
                                <input type="radio" name="metode" value="online" class="hidden peer" {{#if (roles kelas.metode "online")}}checked{{/if}}>
                                <div class="flex items-center justify-center px-4 py-3 border rounded-lg transition
                                            peer-checked:border-gray-900 peer-checked:bg-gray-900 peer-checked:text-white">
                                    <span class="font-semibold">Online</span>
                                </div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="metode" value="offline" class="hidden peer" {{#if (roles kelas.metode "offline")}}checked{{/if}}>
                                <div class="flex items-center justify-center px-4 py-3 border rounded-lg transition
                                            peer-checked:border-gray-900 peer-checked:bg-gray-900 peer-checked:text-white">
                                    <span class="font-semibold">Offline</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Location -->
                    <div>
                        <label for="lokasi" class="block text-sm font-semibold text-gray-700 mb-1">Location</label>
                        <input type="text" id="lokasi" name="lokasi" value="{{kelas.lokasi}}" placeholder="Enter location"
                            class="w-full border bg-white border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
                    </div>

                    <!-- Category -->
                    <div>
                        <label for="kategoriId" class="block text-sm font-semibold text-gray-700 mb-1">Category</label>
                        <select name="kategoriId" id="kategoriId" 
                            class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
                            <option value="" disabled>-- Select Category --</option>
                            {{#each kategori}}
                                <option value="{{id}}" {{#if (roles id ../kelas.kategori.id)}}selected{{/if}}>{{nama_kategori}}</option>
                            {{/each}}
                        </select>
                    </div>

                    <!-- Jenis Kelas -->
                    <div>
                        <label for="jenis_kelasId" class="block text-sm font-semibold text-gray-700 mb-1">Jenis Kelas</label>
                        <select name="jenis_kelasId" id="jenis_kelasId" 
                            class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
                            <option value="" disabled>-- Select Jenis Kelas --</option>
                            {{#each jenis_kelas}}
                                <option value="{{id}}" {{#if (roles id ../kelas.jenis_kelas.id)}}selected{{/if}}>{{nama_jenis_kelas}}</option>
                            {{/each}}
                        </select>
                    </div>

                    <!-- Class Name -->
                    <div>
                        <label for="nama_kelas" class="block text-sm font-semibold text-gray-700 mb-1">Class Name</label>
                        <input type="text" id="nama_kelas" name="nama_kelas" value="{{kelas.nama_kelas}}" required
                            class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
                    </div>

                    <!-- Description -->
                    <div>
                        <label for="deskripsi" class="block text-sm font-semibold text-gray-700 mb-1">Description</label>
                        <textarea id="deskripsi" name="deskripsi" rows="3"
                            class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">{{kelas.deskripsi}}</textarea>
                    </div>

                    <!-- Kuota -->
                    <div x-data="{
                        display: '',
                        value: '',
                        formatKuota(event) {
                            let angka = event.target.value.replace(/\D/g, ''); 
                            this.value = angka;
                            this.display = new Intl.NumberFormat('id-ID').format(angka);
                        }
                    }"
                    x-init="
                        value = '{{kelas.kuota}}';
                        display = new Intl.NumberFormat('id-ID').format(value);
                    " class="relative mb-6">
                        <label for="kuota1" class="block text-sm font-semibold text-gray-700 mb-1">Kuota Class</label>
                        <input type="text" 
                               id="kuota1"
                               x-model="display" 
                               @input="formatKuota($event)" 
                               placeholder="Enter quota"
                               class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
                        <input type="hidden" name="kuota" x-model="value">
                    </div>
                </div>

                <!-- RIGHT COLUMN -->
                <div class="space-y-6">
                    <!-- Technologies -->
                    <div x-data="{ techs: {{json kelas.teknologi}} || [''] }" class="space-y-4">
                        <label class="block text-sm font-semibold text-gray-700">Technologies</label>
                        <template x-for="(tech, index) in techs" :key="index">
                            <div class="flex items-center gap-3">
                                <input type="text" x-model="techs[index]" name="teknologi[]" placeholder="Enter tech..."
                                    class="flex-1 border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
                                <button type="button" @click="techs.splice(index,1)" x-show="techs.length > 1"
                                    class="text-red-500 hover:text-red-700 font-bold text-lg">✕</button>
                            </div>
                        </template>
                        <button type="button" @click="techs.push('')"
                            class="w-full border-2 border-dashed border-gray-300 rounded-lg px-4 py-2 text-gray-500 hover:border-gray-500 hover:text-gray-700 flex items-center justify-center transition">
                            +
                        </button>
                    </div>

                    <!-- Lessons -->
                    <div x-data="{ materis: {{json kelas.materi}} || [''] }" class="space-y-4 mt-6">
                        <label class="block text-sm font-semibold text-gray-700">Lessons</label>
                        <template x-for="(materi, index) in materis" :key="index">
                            <div class="flex items-center gap-3">
                                <input type="text" x-model="materis[index]" name="materi[]" placeholder="Enter lesson..."
                                    class="flex-1 border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
                                <button type="button" @click="materis.splice(index,1)" x-show="materis.length > 1"
                                    class="text-red-500 hover:text-red-700 font-bold text-lg">✕</button>
                            </div>
                        </template>
                        <button type="button" @click="materis.push('')"
                            class="w-full border-2 border-dashed border-gray-300 rounded-lg px-4 py-2 text-gray-500 hover:border-gray-500 hover:text-gray-700 flex items-center justify-center transition">
                            +
                        </button>
                    </div>

                    <!-- Learning Targets -->
                    <div x-data="{ targets: {{json kelas.target_pembelajaran}} || [''] }" class="space-y-4 mt-6">
                        <label class="block text-sm font-semibold text-gray-700">Learning Targets</label>
                        <template x-for="(target, index) in targets" :key="index">
                            <div class="flex items-center gap-3">
                                <input type="text" x-model="targets[index]" name="target_pembelajaran[]" placeholder="Enter target..."
                                    class="flex-1 border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
                                <button type="button" @click="targets.splice(index,1)" x-show="targets.length > 1"
                                    class="text-red-500 hover:text-red-700 font-bold text-lg">✕</button>
                            </div>
                        </template>
                        <button type="button" @click="targets.push('')"
                            class="w-full border-2 border-dashed border-gray-300 rounded-lg px-4 py-2 text-gray-500 hover:border-gray-500 hover:text-gray-700 flex items-center justify-center transition">
                            +
                        </button>
                    </div>

                    <!-- Kriteria -->
                    <div x-data="{ kriterias: {{json kelas.kriteria}} || [''] }" class="space-y-4 mt-6">
                        <label class="block text-sm font-semibold text-gray-700">Kriteria</label>
                        <template x-for="(kriteria, index) in kriterias" :key="index">
                            <div class="flex items-center gap-3">
                                <input type="text" x-model="kriterias[index]" name="kriteria[]" placeholder="Enter kriteria..."
                                    class="flex-1 border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
                                <button type="button" @click="kriterias.splice(index,1)" x-show="kriterias.length > 1"
                                    class="text-red-500 hover:text-red-700 font-bold text-lg">✕</button>
                            </div>
                        </template>
                        <button type="button" @click="kriterias.push('')"
                            class="w-full border-2 border-dashed border-gray-300 rounded-lg px-4 py-2 text-gray-500 hover:border-gray-500 hover:text-gray-700 flex items-center justify-center transition">
                            +
                        </button>
                    </div>

                    <!-- Price -->
                    <div x-data="{
                        display: '',
                        value: '',
                        formatHarga(event) {
                            let angka = event.target.value.replace(/\D/g, ''); 
                            this.value = angka;
                            this.display = new Intl.NumberFormat('id-ID').format(angka);
                        }
                    }"
                    x-init="
                        value = '{{kelas.harga}}'; 
                        display = new Intl.NumberFormat('id-ID').format(value);
                    " class="relative mb-6">
                        <label for="harga1" class="block text-sm font-semibold text-gray-700 mb-1">Price</label>
                        <input type="text" 
                               id="harga1"
                               x-model="display" 
                               @input="formatHarga($event)" 
                               placeholder="0"
                               class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
                        <input type="hidden" name="harga" x-model="value">
                    </div>

                    <!-- Promo -->
                    <div x-data="{
                        display: '',
                        value: '',
                        formatPromo(event) {
                            let angka = event.target.value.replace(/\D/g, ''); 
                            this.value = angka;
                            this.display = new Intl.NumberFormat('id-ID').format(angka);
                        }
                    }"
                    x-init="
                        value = '{{kelas.promo}}'; 
                        display = new Intl.NumberFormat('id-ID').format(value);
                    " class="relative mb-6">
                        <label for="promo1" class="block text-sm font-semibold text-gray-700 mb-1">Promo</label>
                        <input type="text" 
                               id="promo1"
                               x-model="display" 
                               @input="formatPromo($event)" 
                               placeholder="0"
                               class="w-full border border-gray-300 bg-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900 text-gray-700">
                        <input type="hidden" name="promo" x-model="value">
                    </div>
                </div>

                <!-- BUTTONS - Full Width -->
                <div class="lg:col-span-2 flex space-x-4">
                    <button type="submit"
                        class="bg-gray-900 text-white px-6 py-2 rounded-lg shadow hover:bg-gray-600 transition">
                        Update
                    </button>
                    <a href="{{#if (roles user.role "admin")}}/kelass/detail/kelas/admin/{{kelas.id}}{{else if (roles user.role "super_admin")}}/kelass{{/if}}"
                        class="px-6 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition">
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>

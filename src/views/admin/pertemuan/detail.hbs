<div class="px-6 py-10 pt-28">
<div class="max-w-5xl mx-auto" x-data="{ search: '' }">

  <div class="mb-8 bg-white rounded-xl shadow-lg p-6">
    <div class="mb-4">
      <a href="/kelass/detail/kelas/admin/{{pertemuan.kelas.id}}" 
         class="inline-flex items-center text-gray-700 text-base font-semibold hover:underline">
        <svg xmlns="http://www.w3.org/2000/svg" 
             class="h-5 w-5 mr-1" fill="none" 
             viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" 
                stroke-linejoin="round" 
                stroke-width="2" 
                d="M15 19l-7-7 7-7" />
        </svg>
        Back
      </a>
    </div>  

    <div class="flex items-start justify-between">
      <div>
        <h1 class="text-3xl font-bold mb-2 text-gray-900">Session {{pertemuan.pertemuan_ke}}</h1>

        <p class="text-gray-600 mb-1">
          <span class="font-semibold">Class:</span> {{pertemuan.kelas.nama_kelas}}
        </p>
        <p class="text-gray-600 mb-1">
          <span class="font-semibold">Metode:</span> {{pertemuan.metode}}
        </p>
        <p class="text-gray-600 mb-1">
          <span class="font-semibold">Location:</span> {{pertemuan.lokasi}}
        </p class="text-gray-600">
        <p class="text-gray-600 mb-1">
          <span class="font-semibold">Topic:</span> {{pertemuan.topik}}
        </p>
        <p class="text-gray-600 mb-1">
          <span class="font-semibold">Date:</span> {{formatTanggal pertemuan.tanggal}}
        </p>
        <p class="text-gray-600 mb-1">
          <span class="font-semibold">Time :</span> {{formatTime pertemuan.waktu_awal}} - {{formatTime pertemuan.waktu_akhir}}
        </p>

      </div>

      <div class="flex gap-3">
        <a href="/pertemuans/formEdit/{{pertemuan.id}}" 
           class="bg-gray-900 text-white px-4 py-2 rounded-lg shadow hover:bg-gray-700 transition">
          Edit
        </a>
                <form action="/pertemuans/{{pertemuan.id}}/{{pertemuan.kelas.id}}?_method=DELETE" method="post">
          <button 
            type="button"
            onclick="confirmDelete(this)"
            class="bg-red-500 text-white px-4 py-2 rounded-lg shadow hover:bg-red-400 transition">
            Delete
          </button>
        </form>
      </div>
    </div>
  </div>
</div>


<div class="max-w-5xl mx-auto" x-data="{ tab: 'absen', search: '' }">

    <div class="flex space-x-4 mb-6">
    <button @click="tab = 'absen'" 
            :class="tab === 'absen' ? 'bg-gray-900 text-white' : 'bg-gray-100 text-gray-700'" 
            class="px-4 py-2 rounded-lg shadow transition">
      Attendance
    </button>
    <button @click="tab = 'materi'" 
            :class="tab === 'materi' ? 'bg-gray-900 text-white' : 'bg-gray-100 text-gray-700'" 
            class="px-4 py-2 rounded-lg shadow transition">
      Materi
    </button>
    <button @click="tab = 'pertanyaan'" 
            :class="tab === 'pertanyaan' ? 'bg-gray-900 text-white' : 'bg-gray-100 text-gray-700'" 
            class="px-4 py-2 rounded-lg shadow transition">
      Quiz
    </button>
    <button @click="tab = 'tugas'" 
            :class="tab === 'tugas' ? 'bg-gray-900 text-white' : 'bg-gray-100 text-gray-700'" 
            class="px-4 py-2 rounded-lg shadow transition">
      Assignment
    </button>
  </div>

  <div x-show="tab === 'absen'" >
<div 
     x-data="absenTable({ peserta: {{json murid}} })">
  
  <div class="mb-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4">

    <div class="flex items-center gap-3">
      <!-- Search -->
      <div class="relative w-full md:w-64">
        <button 
          @click="search = searchInput; pageNumber=0"
          class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-900"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z"/>
          </svg>
        </button>
        <input 
          type="text" 
          placeholder="Search perticipant..." 
          x-model="searchInput"
          @input="search = searchInput; pageNumber=0"
          class="border border-gray-300 bg-white text-gray-900 rounded-lg px-4 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-gray-900 w-full"
        />
      </div>

      <!-- Tambah Absen -->
      <a href="/absens/create/{{pertemuan.id}}"
         class="bg-gray-900 text-white px-4 py-2 rounded-lg shadow hover:bg-gray-600 transition">
        Create Attendance
      </a>
    </div>
  </div>

  <!-- Table -->
  <div class="overflow-x-auto bg-white shadow-lg rounded-xl">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">No</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Nama</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Email</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Status</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Aksi</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        {{#each murid}}
        <tr class="hover:bg-gray-50 transition"
            x-show="filteredPeserta.includes('{{id}}')">
          <td class="px-6 py-4 text-sm text-gray-800">{{addOne @index}}</td>
          <td class="px-6 py-4 text-sm text-gray-800">{{username}}</td>
          <td class="px-6 py-4 text-sm text-gray-800">{{email}}</td>
          <td class="px-6 py-4 text-sm">
            {{#each absen}}
              <span class="font-medium">{{status}}</span>
            {{/each}}
          </td>
          <td class="px-6 py-4 text-sm text-gray-800 space-x-2">
            {{#each absen}}
              <a href="/absens/formEdit/{{id}}" class="text-gray-600 font-medium hover:underline">Edit</a>
              <form action="/absens/{{id}}/{{../../pertemuan.id}}?_method=DELETE" method="post" class="inline">
                <button type="button" onclick="confirmDelete(this)" class="text-gray-600 font-medium hover:underline">Delete</button>
              </form>
            {{/each}}
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="w-full md:w-1/2 mx-auto py-6 flex justify-center gap-2 items-center" 
       x-show="pageCount() > 1">
    <button @click="prevPage" :disabled="pageNumber==0"
      class="px-3 py-1 rounded border border-gray-900 text-gray-900"
      :class="{ 'opacity-50 cursor-not-allowed': pageNumber==0 }">Prev</button>

    <template x-for="(page,index) in pages()" :key="index">
      <button @click="viewPage(index)" 
        class="px-3 py-1 rounded"
        :class="{ 'bg-gray-900 text-white font-bold': index===pageNumber }"
        x-text="index+1"></button>
    </template>

    <button @click="nextPage" :disabled="pageNumber >= pageCount()-1"
      class="px-3 py-1 rounded border border-gray-900 text-gray-900"
      :class="{ 'opacity-50 cursor-not-allowed': pageNumber >= pageCount()-1 }">Next</button>
  </div>
</div>
  </div>

<div x-show="tab === 'materi'">
  <div class="bg-white rounded-xl shadow-lg p-6">
    
    <div x-data="{ tab: 'pdf' }" class="space-y-6">
      <div class="flex space-x-4">
        <button @click="tab = 'pdf'" 
                :class="tab === 'pdf' ? 'bg-gray-900 text-white' : 'bg-gray-100 text-gray-700'" 
                class="px-4 py-2 rounded-lg shadow transition">PDF</button>
        <button @click="tab = 'video'" 
                :class="tab === 'video' ? 'bg-gray-900 text-white' : 'bg-gray-100 text-gray-700'" 
                class="px-4 py-2 rounded-lg shadow transition">Video</button>
        <button @click="tab = 'ppt'" 
                :class="tab === 'ppt' ? 'bg-gray-900 text-white' : 'bg-gray-100 text-gray-700'" 
                class="px-4 py-2 rounded-lg shadow transition">PPT</button>
      </div>

<!-- PDF Section -->
<div x-show="tab === 'pdf'">

  {{#if materipdf.length}}
    <ul class="space-y-2 mb-6">
      {{#each materipdf}}
<li class="flex justify-between items-center bg-gray-50 p-3 rounded-lg shadow-sm hover:bg-gray-100 transition">
  <span class="text-gray-800">{{judul}}</span>
  <div class="flex space-x-2">
    <!-- Download -->
    <a href="/materis/{{id}}/download" 
       class="p-2 bg-gray-900 text-white rounded-lg shadow hover:bg-gray-700 transition"
       title="Download">
      ⬇
    </a>

    <!-- Delete -->
    <form action="/materis/{{id}}/{{../pertemuan.id}}?_method=DELETE" method="post" class="inline">
      <button type="button" onclick="confirmDelete(this)"
              class="p-2 bg-red-600 text-white rounded-lg shadow hover:bg-red-700 transition"
              title="Delete">
        ✕
      </button>
    </form>
  </div>
</li>
      {{/each}}
    </ul>
  {{else}}
    <div class="mb-6 flex flex-col items-center justify-center text-center py-16 bg-gray-50 border border-dashed rounded-lg">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400 mb-4" fill="none"
           viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
      </svg>
      <p class="text-gray-600 font-medium">No PDF available</p>
      <p class="text-gray-500 text-sm mt-1">Click <span class="font-semibold">Create PDF</span> to add new material.</p>
    </div>
  {{/if}}
      <a href="/materis/formCreate/pdf/{{pertemuan.id}}" 
     class="flex flex-col items-center justify-center text-center py-12 bg-gray-50 border border-dashed rounded-lg hover:bg-gray-100 transition">
    <svg xmlns="http://www.w3.org/2000/svg" 
         class="h-12 w-12 text-gray-400 mb-3" 
         fill="none" viewBox="0 0 24 24" 
         stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
    </svg>
    <span class="text-gray-600 font-medium">Create PDF</span>
  </a>
</div>

<!-- Video Section -->
<div x-show="tab === 'video'">

  {{#if materivideo.length}}
    <ul class="space-y-2 mb-6">
      {{#each materivideo}}
<li class="flex justify-between items-center bg-gray-50 p-3 rounded-lg shadow-sm hover:bg-gray-100 transition">
  <span class="text-gray-800">{{judul}}</span>
  <div class="flex space-x-2">
    <!-- Download -->
    <a href="/materis/{{id}}/download" 
       class="p-2 bg-gray-900 text-white rounded-lg shadow hover:bg-gray-700 transition"
       title="Download">
      ⬇
    </a>

    <!-- Delete -->
    <form action="/materis/{{id}}/{{../pertemuan.id}}?_method=DELETE" method="post" class="inline">
      <button type="button" onclick="confirmDelete(this)"
              class="p-2 bg-red-600 text-white rounded-lg shadow hover:bg-red-700 transition"
              title="Delete">
        ✕
      </button>
    </form>
  </div>
</li>
      {{/each}}
    </ul>
  {{else}}
    <div class="mb-6 flex flex-col items-center justify-center text-center py-16 bg-gray-50 border border-dashed rounded-lg">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400 mb-4" fill="none"
           viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
      </svg>
      <p class="text-gray-600 font-medium">No video available</p>
      <p class="text-gray-500 text-sm mt-1">Click <span class="font-semibold">Create Video</span> to add new material.</p>
    </div>
  {{/if}}
        <a href="/materis/formCreate/video/{{pertemuan.id}}" 
     class="flex flex-col items-center justify-center text-center py-12 bg-gray-50 border border-dashed rounded-lg hover:bg-gray-100 transition">
    <svg xmlns="http://www.w3.org/2000/svg" 
         class="h-12 w-12 text-gray-400 mb-3" 
         fill="none" viewBox="0 0 24 24" 
         stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
    </svg>
    <span class="text-gray-600 font-medium">Create Video</span>
  </a>
</div>

<!-- PPT Section -->
<div x-show="tab === 'ppt'">

  {{#if materippt.length}}
    <ul class="space-y-2 mb-6">
      {{#each materippt}}
<li class="flex justify-between items-center bg-gray-50 p-3 rounded-lg shadow-sm hover:bg-gray-100 transition">
  <span class="text-gray-800">{{judul}}</span>
  <div class="flex space-x-2">
    <!-- Download -->
    <a href="/materis/{{id}}/download" 
       class="p-2 bg-gray-900 text-white rounded-lg shadow hover:bg-gray-700 transition"
       title="Download">
      ⬇
    </a>

    <!-- Delete -->
    <form action="/materis/{{id}}/{{../pertemuan.id}}?_method=DELETE" method="post" class="inline">
      <button type="button" onclick="confirmDelete(this)"
              class="p-2 bg-red-600 text-white rounded-lg shadow hover:bg-red-700 transition"
              title="Delete">
        ✕
      </button>
    </form>
  </div>
</li>
      {{/each}}
    </ul>
  {{else}}
    <div class="mb-6 flex flex-col items-center justify-center text-center py-16 bg-gray-50 border border-dashed rounded-lg">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400 mb-4" fill="none"
           viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
      </svg>
      <p class="text-gray-600 font-medium">No PPT available</p>
      <p class="text-gray-500 text-sm mt-1">Click <span class="font-semibold">Create PPT</span> to add new material.</p>
    </div>
  {{/if}}
        <a href="/materis/formCreate/ppt/{{pertemuan.id}}" 
     class="flex flex-col items-center justify-center text-center py-12 bg-gray-50 border border-dashed rounded-lg hover:bg-gray-100 transition">
    <svg xmlns="http://www.w3.org/2000/svg" 
         class="h-12 w-12 text-gray-400 mb-3" 
         fill="none" viewBox="0 0 24 24" 
         stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
    </svg>
    <span class="text-gray-600 font-medium">Create PPT</span>
  </a>
</div>

    </div>
  </div>
</div>


<div x-show="tab === 'tugas'">
  <!-- Assignment List Section -->
  {{#if pertemuan.tugas.length}}
    <ul class="space-y-3 mb-6">
      {{#each pertemuan.tugas}}
        <li class="flex justify-between items-center bg-white p-4 rounded-xl shadow hover:shadow-lg transition">
          <!-- Title -->
          <span class="text-gray-800 font-semibold text-lg">{{judul}}</span>

          <!-- Actions -->
          <div class="flex items-center gap-2">
            <!-- Download -->
            <a href="/tugas/{{id}}/download" 
               class="p-2 bg-gray-900 text-white rounded-xl shadow hover:bg-gray-700 transition"
               title="Download Assignment">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" 
                   viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" 
                   class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" 
                      d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 
                         2.25 0 0021 18.75V16.5M16.5 10.5L12 15m0 0L7.5 
                         10.5M12 15V3"/>
              </svg>
            </a>

            <!-- View Submissions -->
            <a href="/jawaban-tugass/{{id}}"
               class="p-2 bg-blue-600 text-white rounded-xl shadow hover:bg-blue-500 transition"
               title="View Submissions">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" 
                   viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" 
                   class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" 
                      d="M2.25 12c0-1.5 3.75-7.5 9.75-7.5s9.75 6 
                         9.75 7.5-3.75 7.5-9.75 7.5S2.25 13.5 2.25 12z"/>
                <path stroke-linecap="round" stroke-linejoin="round" 
                      d="M12 15.75a3.75 3.75 0 100-7.5 
                         3.75 3.75 0 000 7.5z"/>
              </svg>
            </a>

            <!-- Delete -->
            <form action="/tugass/{{id}}/{{../pertemuan.id}}?_method=DELETE" 
                  method="post" class="inline">
              <button type="button" onclick="confirmDelete(this)" 
                      class="p-2 bg-red-600 text-white rounded-xl shadow hover:bg-red-500 transition"
                      title="Delete Assignment">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" 
                     viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" 
                     class="w-5 h-5">
                  <path stroke-linecap="round" stroke-linejoin="round" 
                        d="M6 18L18 6M6 6l12 12"/>
                </svg>
              </button>
            </form>
          </div>
        </li>
      {{/each}}
    </ul>
  {{else}}
    <!-- Empty State -->
    <div class="flex flex-col items-center justify-center text-center py-16 bg-gray-50 border-2 border-dashed rounded-xl mb-6">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-14 w-14 text-gray-400 mb-4" fill="none"
           viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 
                 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
      </svg>
      <p class="text-gray-700 font-medium text-lg">No assignments yet</p>
      <p class="text-gray-500 text-sm mt-1">
        Click <span class="font-semibold">Add Assignment</span> to create a new one.
      </p>
    </div>
  {{/if}}

  <!-- Add Assignment -->
  <a href="/tugass/formCreate/{{pertemuan.id}}" 
     class="flex flex-col items-center justify-center text-center py-12 bg-gray-50 border-2 border-dashed rounded-xl hover:bg-gray-100 transition">
    <svg xmlns="http://www.w3.org/2000/svg" 
         class="h-12 w-12 text-gray-400 mb-3" 
         fill="none" viewBox="0 0 24 24" 
         stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
    </svg>
    <span class="text-gray-700 font-medium">Add Assignment</span>
  </a>
</div>

<div x-show="tab === 'pertanyaan'" class="space-y-6">

  {{#if pertanyaan.length}}
    <!-- Questions List -->
    <div class="space-y-4">
      {{#each pertanyaan}}
      <div x-data="{ open: false }" class="bg-white border rounded-lg shadow">
        
        <!-- Question Header -->
        <button @click="open = !open"
                class="w-full flex justify-between items-center px-6 py-4 text-left">
          <span class="font-semibold text-gray-800">{{pertanyaan_soal}}</span>
          <svg xmlns="http://www.w3.org/2000/svg"
               :class="{'rotate-180': open}"
               class="h-5 w-5 transform transition-transform"
               fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M19 9l-7 7-7-7" />
          </svg>
        </button>

        <!-- Question Content -->
        <div x-show="open" x-collapse class="px-6 pb-6 space-y-4">

          <!-- Answers -->
          <ul class="space-y-2">
            {{#each this.jawaban}}
            <li class="flex items-center gap-3 p-2 rounded-lg border 
                       {{#if this.jawaban_benar}}
                         bg-green-50 border-green-400
                       {{else}}
                         bg-gray-50 border-gray-200
                       {{/if}}">
              <span class="text-gray-700">{{this.jawaban}}</span>
              {{#if this.jawaban_benar}}
              <span class="ml-auto text-green-600 font-semibold text-sm">Correct</span>
              {{/if}}
            </li>
            {{/each}}
          </ul>

          <!-- Actions -->
          <div class="flex gap-3 pt-2">
            <a href="/pertanyaans/FormEdit/{{this.id}}"
               class="inline-flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-lg shadow hover:bg-gray-700 transition">
              Edit
            </a>
            <form action="/pertanyaans/{{this.id}}/{{../pertemuan.id}}?_method=DELETE" method="post">
              <button type="button" 
                      onclick="confirmDelete(this)"
                      class="inline-flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-lg shadow hover:bg-red-500 transition">
                Delete
              </button>
            </form>
          </div>
        </div>
      </div>
      {{/each}}
    </div>
  {{else}}
    <!-- Empty State -->
    <div class="flex flex-col items-center justify-center text-center py-16 bg-gray-50 border border-dashed rounded-lg">
      <svg xmlns="http://www.w3.org/2000/svg" 
           class="h-12 w-12 text-gray-400 mb-4" 
           fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
      </svg>
      <p class="text-gray-600 font-medium">No questions yet</p>
      <p class="text-gray-500 text-sm mt-1">
        Click the <span class="font-semibold">Create Quiz</span> button to add a new question.
      </p>
    </div>
  {{/if}}

  <!-- Add New Question -->
  <a href="/pertanyaans/formCreate/{{pertemuan.id}}" 
     class="flex flex-col items-center justify-center text-center py-12 bg-gray-50 border border-dashed rounded-lg hover:bg-gray-100 transition">
    <svg xmlns="http://www.w3.org/2000/svg" 
         class="h-12 w-12 text-gray-400 mb-3" 
         fill="none" viewBox="0 0 24 24" 
         stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
    </svg>
    <span class="text-gray-600 font-medium">Add Question</span>
  </a>
</div>


</div>
</div>


<script>
function absenTable({ peserta }) {
  return {
    searchInput: "",
    search: "",
    pageNumber: 0,
    size: 5,
    peserta,
    amount: 0,
    get filteredPeserta() {
      let filtered = this.peserta.filter(u =>
        (`${u.username} ${u.email} ${u.status || ''}`).toLowerCase()
          .includes(this.search.toLowerCase())
      );
      this.amount = filtered.length;

      const start = this.pageNumber * this.size;
      const end = start + this.size;
      return filtered.slice(start, end).map(u => u.id.toString());
    },
    pages() { return Array.from({ length: this.pageCount() }); },
    pageCount() { return Math.ceil(this.amount / this.size); },
    nextPage() { if (this.pageNumber < this.pageCount()-1) this.pageNumber++; },
    prevPage() { if (this.pageNumber > 0) this.pageNumber--; },
    viewPage(index) { this.pageNumber = index; },
  }
}
</script>
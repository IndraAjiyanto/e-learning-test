<div class="bg-white text-gray-900 px-6 py-10 pt-28">
  <div class="max-w-7xl mx-auto px-6 py-12 grid grid-cols-1 lg:grid-cols-3 gap-10">
    
    <!-- Left Content -->
<div class="lg:col-span-2 space-y-8">
  <!-- Course Preview -->
  <div class="w-full rounded-xl overflow-hidden shadow">
    <img src="{{kelas.gambar}}" alt="{{kelas.nama_kelas}}" class="w-full object-cover">
  </div>

  <!-- Tabs -->
  <div class="border-b flex gap-6 text-sm font-medium">
    <button class="pb-3 border-b-2 border-gray-900">Course Info</button>
    <button class="pb-3 text-gray-500 hover:text-gray-900">Reviews</button>
  </div>

  <!-- Description -->
  <div>
    <h3 class="text-2xl font-bold mb-3 text-gray-900">{{kelas.nama_kelas}}</h3>
    <p class="text-gray-700 leading-relaxed">
      {{kelas.deskripsi}}
    </p>
  </div>

  <!-- Course Content (Accordion Style) -->
  <div class="space-y-6 divide-y divide-gray-200">
    
    <!-- Material Includes -->
    <div class="pt-4">
      <h4 class="text-lg font-semibold mb-2 text-gray-900">Material Includes</h4>
      <ul class="list-disc pl-5 space-y-1 text-sm text-gray-700">
        {{#each kelas.materi}}
        <li>{{this}}</li>
        {{/each}}
      </ul>
    </div>

    <!-- What You'll Learn -->
    <div class="pt-4">
      <h4 class="text-lg font-semibold mb-2 text-gray-900">What You'll Learn</h4>
      <ul class="list-disc pl-5 space-y-1 text-sm text-gray-700">
        {{#each kelas.target_pembelajaran}}
        <li>{{this}}</li>
        {{/each}}
      </ul>
    </div>


    <!-- Tags -->
    <div class="pt-4">
      <h4 class="text-lg font-semibold mb-2 text-gray-900">Tech</h4>
      <div class="flex gap-2 flex-wrap">
        {{#each kelas.teknologi}}
        <span class="badge badge-outline">{{this}}</span>
        {{/each}}
      </div>
    </div>

  </div>
</div>

    <!-- Right Sidebar -->
<aside class="space-y-6" x-data="{ previewUrl: null }">
  <div class="p-6 border rounded-xl shadow space-y-6 bg-white">
    <!-- Harga -->
    <div>
      <p class="text-4xl text-center font-bold text-gray-900">{{formatRupiah kelas.harga}}</p>
    </div>

    <!-- Card No Rekening -->
              {{#if (roles kelas.kategori.nama_kategori "free class")}}
              {{else}}
              {{#if (check daftar kelas.kuota) }}
                          <div class="bank-card p-5 flex flex-col gap-4">
                    <p class="text-xs text-gray-900 mb-1">Account Number</p>
                    <div class="flex items-center justify-between">
                        <p class="account-number text-xl font-bold tracking-wider">2847 9237 4298 1234</p>
                        <button @click="copyToClipboard" 
                                :class="{ 'copied': copied }" 
                                class="copy-btn p-2 rounded-full text-gray-700">
                            <i class="far" :class="copied ? 'fa-check' : 'fa-copy'"></i>
                        </button>
                </div>
                
                <div class="flex justify-between items-center mt-4">
                    <div>
                        <p class="text-xs text-gray-900">Account Holder</p>
                        <p class="text-sm font-semibold">KESATRIA ACADEMY</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-900">Bank Name</p>
                        <p class="text-sm font-semibold">BANK BCA</p>
                    </div>
                </div>
            </div>

            <!-- Payment Instructions -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <h4 class="font-semibold text-blue-800 flex items-center gap-2">
                    <i class="fas fa-info-circle"></i> Payment Instructions
                </h4>
                <ol class="list-decimal pl-5 mt-2 space-y-1 text-sm text-blue-700">
                    <li>Transfer the exact amount of <span class="font-semibold">{{formatRupiah kelas.harga}}</span></li>
                    <li>Use your name as the transfer reference</li>
                    <li>Upload proof of payment below</li>
                    <li>After uploading proof, the payment status will be "Processing"</li>
                    <li>Wait for confirmation from the admin. If the payment is valid, the payment status will be "Accepted"</li>
                    <li>Class access will be granted</li>
                </ol>
            </div>
            {{else}}
            class sedang penuh
            {{/if}}
              {{/if}}

    <!-- Form Upload -->
    {{#if user}}
          {{#if (roles kelas.kategori.nama_kategori "free class")}}
                     <form action="/pembayarans/{{user.id}}/{{kelas.id}}" method="post" class="space-y-3">

      <button type="submit" class="btn w-full bg-gray-900 text-white hover:bg-gray-700">
        Enroll Now
      </button>
    </form>
          {{else if (roles kelas.kategori.nama_kategori "course")}}
              {{#if (check daftar kelas.kuota) }}
           <form action="/pembayarans/{{user.id}}/{{kelas.id}}"  enctype="multipart/form-data" method="post" class="space-y-3">
      <label class="block text-sm font-medium text-gray-700">Upload Payment Proof</label>
      <input 
        type="file" name="file"
        class="file-input file-input-bordered w-full bg-white border-gray-300 rounded-lg"
        @change="previewUrl = $event.target.files[0] ? URL.createObjectURL($event.target.files[0]) : null"
      />

      <!-- Preview -->
      <template x-if="previewUrl">
        <div class="mt-2">
          <p class="text-xs text-gray-500 mb-1">Preview:</p>
          <img :src="previewUrl" alt="Preview" class="rounded-lg border max-h-48 object-contain" />
        </div>
      </template>

      <button type="submit" class="btn w-full bg-gray-900 text-white hover:bg-gray-700">
        Enroll Now
      </button>
    </form>
    {{/if}}
          {{else if (roles kelas.kategori.nama_kategori "bootcamp")}}
              {{#if (check daftar kelas.kuota) }}
                     <form action="/pembayarans/{{user.id}}/{{kelas.id}}"  enctype="multipart/form-data" method="post" class="space-y-3">
      <label class="block text-sm font-medium text-gray-700">Upload Bukti Transfer</label>
      <input 
        type="file" name="file"
        class="file-input file-input-bordered w-full bg-white border-gray-300 rounded-lg"
        @change="previewUrl = $event.target.files[0] ? URL.createObjectURL($event.target.files[0]) : null"
      />

      <!-- Preview -->
      <template x-if="previewUrl">
        <div class="mt-2">
          <p class="text-xs text-gray-500 mb-1">Preview:</p>
          <img :src="previewUrl" alt="Preview" class="rounded-lg border max-h-48 object-contain" />
        </div>
      </template>

      <button type="submit" class="btn w-full bg-gray-900 text-white hover:bg-gray-700">
        Enroll Now
      </button>
    </form>
    {{/if}}
          {{/if }}
      {{else}}

      <a href="/login" class="btn w-full bg-gray-900 text-white hover:bg-gray-700">
        Enroll Now
      </a>
          {{/if}}






  </div>
</aside>


  </div>

  <!-- Related Courses -->
  <h2 class="text-2xl font-bold mb-5">Other Class</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            {{#each kelass}}
            <div 
                class="card bg-white shadow-lg border rounded-xl overflow-hidden transition-all duration-300"
                x-show="tab === '{{kategori.nama_kategori}}'"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 transform scale-95"
                x-transition:enter-end="opacity-100 transform scale-100">
                <figure class="px-6 pt-6">
                    <img src="{{gambar}}" alt="{{nama_kelas}}" class="rounded-xl h-40 w-full object-cover">
                </figure>
                <div class="card-body">
                    <div class="flex gap-2 mb-2">
                        <span class="badge badge-outline px-2 py-1 text-xs">{{kategori.nama_kategori}}</span>
                    </div>
                    <h2 class="card-title text-gray-900 text-lg">{{nama_kelas}}</h2>
                    <p class="text-sm text-gray-600 line-clamp-2">
                        {{deskripsi}}
                    </p>
                    <div class="card-actions justify-end mt-4">
                        <a href="/kelass/{{id}}" class="btn btn-outline w-full hover:bg-gray-900 hover:text-white text-gray-900 transition-colors">View Class</a>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>

    <!-- Navigation -->
    <div class="flex justify-center gap-3 mt-10">
      <button class="btn btn-circle bg-white text-gray-700 border-gray-700">❮</button>
      <button class="btn btn-circle bg-white text-gray-700 border-gray-700">❯</button>
    </div>
  </div>
</div>
